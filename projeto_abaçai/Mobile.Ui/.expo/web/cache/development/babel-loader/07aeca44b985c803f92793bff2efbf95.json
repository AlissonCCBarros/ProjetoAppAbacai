{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport axios from 'axios';\nimport qs from 'qs';\nimport * as Cache from \"../services/cache\";\nexport var Api = function Api(resource, endpoint) {\n  _classCallCheck(this, Api);\n\n  this.Resourse = resource;\n  this.EndPoint = endpoint;\n  this.defaultFilter = {\n    pageSize: 10,\n    pageIndex: 0,\n    isPaginate: true\n  };\n  this.byCache = false;\n  this.hasDefaultFilters = true;\n  this.lastAction = 'none';\n  this.url = '';\n  this.get = _get;\n  this.post = _post;\n  this.put = _put;\n  this.delete = _delete;\n  this.dataItem = _dataItem;\n  var self = this;\n\n  function _post(model) {\n    return _regeneratorRuntime.async(function _post$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            self.lastAction = 'post';\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(makeUri());\n\n          case 3:\n            self.url = _context.sent;\n            return _context.abrupt(\"return\", axios.post(self.url, model).then(function (res) {\n              handleSuccess(res.data);\n              return res.data;\n            }).catch(function (err) {\n              handleError(err.response);\n              throw err.response;\n            }));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _put(model) {\n    return _regeneratorRuntime.async(function _put$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            self.lastAction = 'put';\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(makeUri());\n\n          case 3:\n            self.url = _context2.sent;\n            return _context2.abrupt(\"return\", axios.put(self.url, model).then(function (res) {\n              handleSuccess(res.data);\n              return res.data;\n            }).catch(function (err) {\n              handleError(err.response);\n              throw err.response;\n            }));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _delete(model) {\n    return _regeneratorRuntime.async(function _delete$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            self.lastAction = 'delete';\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(makeUri());\n\n          case 3:\n            self.url = _context3.sent;\n            return _context3.abrupt(\"return\", axios.delete(self.url, {\n              params: model\n            }).then(function (res) {\n              handleSuccess(res.data);\n              return res.data;\n            }).catch(function (err) {\n              handleError(err.response);\n              throw err.response;\n            }));\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _get(filters) {\n    var _filters;\n\n    return _regeneratorRuntime.async(function _get$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            self.lastAction = 'get';\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(makeUri());\n\n          case 3:\n            self.url = _context4.sent;\n            _filters = _extends(this.defaultFilter, filters);\n            if (_filters.id) self.url = String.format('{0}/{1}', self.url, _filters.id);\n            return _context4.abrupt(\"return\", axios.get(self.url, {\n              params: _filters,\n              paramsSerializer: function paramsSerializer() {\n                return qs.stringify(filters);\n              }\n            }).then(function (res) {\n              handleSuccess(res.data);\n              return res.data;\n            }).catch(function (err) {\n              handleError(err.response);\n              throw err.response;\n            }));\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, this, null, Promise);\n  }\n\n  function _dataItem(filters) {\n    var _filters;\n\n    return _regeneratorRuntime.async(function _dataItem$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            self.lastAction = 'get';\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(makeUri());\n\n          case 3:\n            self.url = _context5.sent;\n            _filters = _extends(this.defaultFilter, filters);\n            if (_filters.id) self.url = String.format('{0}/{1}', self.url, _filters.id);\n            return _context5.abrupt(\"return\", axios.get(self.url, {\n              params: _filters,\n              paramsSerializer: function paramsSerializer() {\n                return qs.stringify(filters);\n              }\n            }).then(function (res) {\n              handleSuccess(res.data);\n              return res.data;\n            }).catch(function (err) {\n              handleError(err.response);\n              throw err.response;\n            }));\n\n          case 7:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, this, null, Promise);\n  }\n\n  function makeUri() {\n    var endpoint;\n    return _regeneratorRuntime.async(function makeUri$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            endpoint = self.EndPoint;\n            if (!self.EndPoint) endpoint = 'http://localhost:7002/';\n            _context6.next = 4;\n            return _regeneratorRuntime.awrap(configHeaders());\n\n          case 4:\n            return _context6.abrupt(\"return\", String.format('{0}/{1}', endpoint, self.Resourse));\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function configHeaders() {\n    var accesstoken;\n    return _regeneratorRuntime.async(function configHeaders$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(Cache.get('ACCESS_TOKEN'));\n\n          case 2:\n            accesstoken = _context7.sent;\n            if (accesstoken) axios.defaults.headers.common['Authorization'] = 'Bearer ' + accesstoken;\n            axios.defaults.headers.common['Accept-Language'] = 'pt-BR';\n\n          case 5:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function handleSuccess(response) {\n    addCache(response.data);\n  }\n\n  function handleError(err) {\n    if (err && err.status == 401) {}\n  }\n\n  function addCache(data) {\n    if (!self.byCache) return;\n    if (self.url == '') return;\n\n    if (self.lastAction == 'get') {\n      if (data.Data != null || data.DataList != null && data.DataList.length > 0) {\n        data = JSON.stringify(data);\n        Cache.Add(self.url, data);\n      }\n    }\n  }\n\n  String.format = function () {\n    var theString = arguments[0];\n\n    for (var i = 1; i < arguments.length; i++) {\n      var regEx = new RegExp('\\\\{' + (i - 1) + '\\\\}', 'gm');\n      theString = theString.replace(regEx, arguments[i]);\n    }\n\n    return theString;\n  };\n\n  Object.$httpParamSerializer = function () {\n    var qs = JSON.stringify(arguments[0]);\n    var pairs = qs.split('&');\n    var result = {};\n    pairs.forEach(function (p) {\n      var pair = p.split('=');\n      var key = pair[0];\n      var value = decodeURIComponent(pair[1] || '');\n\n      if (result[key]) {\n        if (Object.prototype.toString.call(result[key]) === '[object Array]') {\n          result[key].push(value);\n        } else {\n          result[key] = [result[key], value];\n        }\n      } else {\n        result[key] = value;\n      }\n    });\n    return JSON.parse(JSON.stringify(result));\n  };\n};","map":{"version":3,"sources":["D:/TCC/2020-1-selosocial/src/services/api.js"],"names":["axios","qs","Cache","Api","resource","endpoint","Resourse","EndPoint","defaultFilter","pageSize","pageIndex","isPaginate","byCache","hasDefaultFilters","lastAction","url","get","_get","post","_post","put","_put","delete","_delete","dataItem","_dataItem","self","model","makeUri","then","res","handleSuccess","data","catch","err","handleError","response","params","filters","_filters","id","String","format","paramsSerializer","stringify","configHeaders","accesstoken","defaults","headers","common","addCache","status","Data","DataList","length","JSON","Add","theString","arguments","i","regEx","RegExp","replace","Object","$httpParamSerializer","pairs","split","result","forEach","p","pair","key","value","decodeURIComponent","prototype","toString","call","push","parse"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport qs from 'qs';\r\nimport * as Cache from '../services/cache';\r\n// import NavigationService from '../services/navigationService';\r\n\r\nexport class Api {\r\n  constructor(resource, endpoint) {\r\n    this.Resourse = resource;\r\n    this.EndPoint = endpoint;\r\n\r\n    this.defaultFilter = {\r\n      pageSize: 10,\r\n      pageIndex: 0,\r\n      isPaginate: true\r\n    };\r\n\r\n    this.byCache = false;\r\n    this.hasDefaultFilters = true;\r\n    this.lastAction = 'none';\r\n    this.url = '';\r\n    this.get = _get;\r\n    this.post = _post;\r\n    this.put = _put;\r\n    this.delete = _delete;\r\n    this.dataItem = _dataItem;\r\n    var self = this;\r\n\r\n    async function _post(model) {\r\n      self.lastAction = 'post';\r\n      self.url = await makeUri();\r\n      return axios\r\n        .post(self.url, model)\r\n        .then(res => {\r\n          handleSuccess(res.data);\r\n          return res.data;\r\n        })\r\n        .catch(err => {\r\n          handleError(err.response);\r\n          throw err.response;\r\n        });\r\n    }\r\n\r\n    async function _put(model) {\r\n      self.lastAction = 'put';\r\n      self.url = await makeUri();\r\n      return axios\r\n        .put(self.url, model)\r\n        .then(res => {\r\n          handleSuccess(res.data);\r\n          return res.data;\r\n        })\r\n        .catch(err => {\r\n          handleError(err.response);\r\n          throw err.response;\r\n        });\r\n    }\r\n\r\n    async function _delete(model) {\r\n      self.lastAction = 'delete';\r\n      self.url = await makeUri();\r\n      return axios\r\n        .delete(self.url, { params: model })\r\n        .then(res => {\r\n          handleSuccess(res.data);\r\n          return res.data;\r\n        })\r\n        .catch(err => {\r\n          handleError(err.response);\r\n          throw err.response;\r\n        });\r\n    }\r\n\r\n    async function _get(filters) {\r\n      self.lastAction = 'get';\r\n      self.url = await makeUri();\r\n      var _filters = Object.assign(this.defaultFilter, filters);\r\n      if (_filters.id) self.url = String.format('{0}/{1}', self.url, _filters.id);\r\n      return axios\r\n        .get(self.url, {\r\n          params: _filters,\r\n          paramsSerializer: () => {\r\n            return qs.stringify(filters);\r\n          }\r\n        })\r\n        .then(res => {\r\n          handleSuccess(res.data);\r\n          return res.data;\r\n        })\r\n        .catch(err => {\r\n          handleError(err.response);\r\n          throw err.response;\r\n        });\r\n    }\r\n\r\n    async function _dataItem(filters) {\r\n      self.lastAction = 'get';\r\n      self.url = await makeUri();\r\n      var _filters = Object.assign(this.defaultFilter, filters);\r\n      if (_filters.id) self.url = String.format('{0}/{1}', self.url, _filters.id);\r\n      return axios\r\n        .get(self.url, {\r\n          params: _filters,\r\n          paramsSerializer: () => {\r\n            return qs.stringify(filters);\r\n          }\r\n        })\r\n        .then(res => {\r\n          handleSuccess(res.data);\r\n          return res.data;\r\n        })\r\n        .catch(err => {\r\n          handleError(err.response);\r\n          throw err.response;\r\n        });\r\n    }\r\n\r\n    async function makeUri() {\r\n      var endpoint = self.EndPoint;\r\n      if (!self.EndPoint) endpoint = 'http://localhost:7002/'; //Global.END_POINT_DEFAULT;\r\n      await configHeaders();\r\n      return String.format('{0}/{1}', endpoint, self.Resourse);\r\n    }\r\n\r\n    async function configHeaders() {\r\n      let accesstoken = await Cache.get('ACCESS_TOKEN');\r\n      if (accesstoken) axios.defaults.headers.common['Authorization'] = 'Bearer ' + accesstoken;\r\n      axios.defaults.headers.common['Accept-Language'] = 'pt-BR';\r\n    }\r\n\r\n    function handleSuccess(response) {\r\n      addCache(response.data);\r\n    }\r\n\r\n    function handleError(err) {\r\n      if (err && err.status == 401) {\r\n        //redirecionar para o login\r\n        // NavigationService.navigate('signIn');\r\n      }\r\n    }\r\n\r\n    function addCache(data) {\r\n      if (!self.byCache) return;\r\n      if (self.url == '') return;\r\n      if (self.lastAction == 'get') {\r\n        if (data.Data != null || (data.DataList != null && data.DataList.length > 0)) {\r\n          data = JSON.stringify(data);\r\n          Cache.Add(self.url, data);\r\n        }\r\n      }\r\n    }\r\n\r\n    String.format = function() {\r\n      var theString = arguments[0];\r\n      for (var i = 1; i < arguments.length; i++) {\r\n        var regEx = new RegExp('\\\\{' + (i - 1) + '\\\\}', 'gm');\r\n        theString = theString.replace(regEx, arguments[i]);\r\n      }\r\n      return theString;\r\n    };\r\n\r\n    Object.$httpParamSerializer = function() {\r\n      var qs = JSON.stringify(arguments[0]);\r\n      var pairs = qs.split('&');\r\n      var result = {};\r\n      pairs.forEach(p => {\r\n        var pair = p.split('=');\r\n        var key = pair[0];\r\n        var value = decodeURIComponent(pair[1] || '');\r\n        if (result[key]) {\r\n          if (Object.prototype.toString.call(result[key]) === '[object Array]') {\r\n            result[key].push(value);\r\n          } else {\r\n            result[key] = [result[key], value];\r\n          }\r\n        } else {\r\n          result[key] = value;\r\n        }\r\n      });\r\n      return JSON.parse(JSON.stringify(result));\r\n    };\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}